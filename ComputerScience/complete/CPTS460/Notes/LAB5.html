<html>
<body>
<PRE>

                 ASSIGNMENT #5 TIMER and Keyboard Drivers for MTX
                           DUE: Friday, April 3, 2009

1. Get HELP files:
   Attend HELP session to get files from Victor.
   As shown in class, the timer interrupt handler only prints a message every second.

2. MODIFY the timer interrupt handler, thandler(), to do the following:

   (a). At each second : display current time HH:MM:SS at the lower right corner.
                         Read my video display driver vid.c code for how.

   (b). When a proc is scheduled to run, set its PROC.time to an alloted run time,
        e.g. 5 seconds. Decrement running's run time in Umode only!  When a proc's
        run time expires, switch process.

   (c). Every 5 seconds: turn off FD if it is on;   (write 0x0C to 0x3F2)
                         turn on  FD if it is off;  (write 0x1C to 0x3F2)

   (d). From Umode, add a command, sleep, which ask for a time t to sleep.
        Syscall to MTX kernel to sleep for t seconds. The process becomes READY
        to run again when its sleep time expires.


3. Modify the Keyboard interrupt handler, kbhandler() to do these:
   (a). Catch function keys F1 to F3 as HOT keys:
              F1 : print "I am hot"
              F2 : print "You are cold"
              F3 : do ps() in MTX Kernel

   (b). In getc(), process executes 
           while(kbdata==0);
        to "wait for" an input key.

        Replace this "BUSY wait" by letting the process go to 
        sleep() and modify the interrupt handler accordingly.
              
