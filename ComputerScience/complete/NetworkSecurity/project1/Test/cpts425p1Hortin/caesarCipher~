#!/usr/bin/python
######################################################
#Alex Hortin
#PA1
#CPTS 425 
#March 2009
#ceasarCipher
######################################################
import sys

if "-i" not in sys.argv or "-o" not in sys.argv or "-k" not in sys.argv: 
	print "...usage: -i input_file -o output_file -k key_value"
	exit(1)
print "...ceasar cipher"
for arg in enumerate(sys.argv):
	if sys.argv[arg[0]] == "-i":#found the infile flag
		print "...opening '", sys.argv[arg[0]+1], "' for read"
		f_read = open((sys.argv[arg[0]+1]), 'r')
	if sys.argv[arg[0]] == "-o":#found the outfile flag
		print "...opening '", sys.argv[arg[0]+1], "' for write"
		f_write = open((sys.argv[arg[0]+1]), 'w')
	if sys.argv[arg[0]] == "-k":#found the key flag
		print "...setting key value to '", sys.argv[arg[0]+1], "' for cipher"
		key = int(sys.argv[arg[0]+1])
#checking for the system flag
if "-d" in sys.argv: 
	m = -1#if the decrpyting flag is present
	print "...decrypting"
else:
	print "...encrypting"
	m =1
for l in f_read:#reads in the lines
	for c in l:#for all characters
		if ord(c) <= 126 and ord(c) >= 33: #if the value is in the acceptible range   
			temp = chr((((ord(c) - 32) - (m*key)) % 95)+32)#decrypting or encrypting the character based on m
			f_write.write(temp)
		else: f_write.write(c)

